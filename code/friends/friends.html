<!DOCTYPE html>

<html>

<head>
    <title>Add friends</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Figtree:ital,wght@0,300..900;1,300..900&display=swap"
        rel="stylesheet">

    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <link rel="stylesheet" type="text/css" href="friends.css" />
    <link rel="stylesheet" href="../main.css">
</head>

<body>
    <div id="mobile">
        <div id="header">
            <img src="../img/skeleton-profile-green.png" alt="your profile" style="height: 50px; width: 50px;">
            <h2>Ann Basil</h2>
        </div>

        <script>
            // Get the saved image src from localStorage
            const savedImageSrc = localStorage.getItem('selectedProfile');
        
            // If a saved image exists, update the profile image
            if (savedImageSrc) {
                const profileImage = document.querySelector('#header img');
                profileImage.src = savedImageSrc;
            }
        </script>

        <hr>

        <div id="friend-box" style="margin-bottom: -420px">
            <div class="column" id="column-1">
                <div class="container" id="top-friends">
                    <h2>Your top friends</h2>
                    
                        <div class="friend-card">
                            <a href="vibha-profile.html">
                                <p>1</p>
                                <img src="../img/fish-profile-green.png" alt="profile pic">
                                <p>Vibha</p>
                                <img src="../img/star-badge.png" alt="star symbol" id="star">
                                <p>34</p>
                            </a>
                        </div>
                    

                    <div class="friend-card">
                        <a href="angela-profile.html">
                            <p>2</p>
                            <img src="../img/shark-profile-red.png" alt="profile pic">
                            <p>Angela</p>
                            <img src="../img/star-badge.png" alt="star symbol" id="star">
                            <p>75</p>
                        </a>
                    </div>

                    <div class="friend-card">
                        <a href="daniel-profile.html">
                            <p>3</p>
                            <img src="../img/fish-profile-purple.png" alt="profile pic">
                            <p>Daniel</p>
                            <img src="../img/star-badge.png" alt="star symbol" id="star">
                            <p>42</p>
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <div class="search-container" style="width: 300px; text-align: center; position: relative; display: inline-block; margin-bottom: 20px">
            <input type="text" id="friend-search" placeholder="Search friends..." style="width: 100%; padding: 10px 40px 10px 20px; font-size: 14px; border: 1px solid #ccc; border-radius: 5px; box-sizing: border-box;">
            <span class="search-icon" style="position: absolute; right: 10px; top: 50%; transform: translateY(-50%); cursor: pointer; font-size: 18px;">
                üîç
            </span>
            <ul id="search-dropdown" style="display: none; position: absolute; top: calc(100% + 5px); left: 10%; width: 80%; background-color: white; border: 1px solid #ccc; border-radius: 5px; list-style: none; padding: 0; margin: 0; z-index: 1000; text-align: left;">
                <!-- Matching names will be dynamically added here -->
            </ul>
        </div>
        <script>
            document.addEventListener('DOMContentLoaded', () => {
                const searchInput = document.getElementById('friend-search');
                const searchDropdown = document.getElementById('search-dropdown');
            
                // List of names to search
                const friendNames = [
                    'Bruno Mars',
                    'Miley Cyrus',
                    'Lady Gaga',
                    'Charli XCX',
                    'Troye Sivan',
                    'Jessi J',
                    'Ariana Grande',
                    'Taylor Swift',
                    'Ed Sheeran',
                    'Katy Perry',
                    'Oski'
                ];

                // Map each name to its corresponding profile page
                const friendPages = {
                    'Bruno Mars': 'brunomars-profile.html',
                    'Miley Cyrus': 'mileycyrus-profile.html',
                    'Lady Gaga': 'ladygaga-profile.html',
                    'Charli XCX': 'charli-xcx-profile.html',
                    'Troye Sivan': 'troyesivan-profile.html',
                    'Jessi J': 'jessi-j-profile.html',
                    'Ariana Grande': 'arianagrande-profile.html',
                    'Taylor Swift': 'taylorswift-profile.html',
                    'Ed Sheeran': 'edsheeran-profile.html',
                    'Katy Perry': 'katyperry-profile.html',
                    'Oski': 'oski-bear.html'
                };

                // Show dropdown and filter names as the user types
                searchInput.addEventListener('input', () => {
                    const query = searchInput.value.toLowerCase();
                    searchDropdown.innerHTML = ''; // Clear previous results

                    if (query.trim() !== '') {
                        const matches = friendNames.filter(name => name.toLowerCase().includes(query));

                        if (matches.length > 0) {
                            searchDropdown.style.display = 'block'; // Show dropdown

                            matches.forEach(name => {
                                const listItem = document.createElement('li');
                                listItem.textContent = name;
                                listItem.style.padding = '10px';
                                listItem.style.cursor = 'pointer';

                                // Add click functionality to redirect to the corresponding page
                                listItem.addEventListener('click', () => {
                                    const page = friendPages[name]; // Get the corresponding page URL
                                    if (page) {
                                        window.location.href = page; // Redirect to the page
                                    }
                                });

                                searchDropdown.appendChild(listItem);
                            });
                        } else {
                            searchDropdown.style.display = 'none'; // Hide dropdown if no matches
                        }
                    } else {
                        searchDropdown.style.display = 'none'; // Hide dropdown if input is empty
                    }
                });
            
                // Hide dropdown when clicking outside the search bar
                document.addEventListener('click', (event) => {
                    if (!searchInput.contains(event.target) && !searchDropdown.contains(event.target)) {
                        searchDropdown.style.display = 'none';
                    }
                });
            });
        </script>
        <div id="friend-box">
            <div class="column" id="column-2">
                <h2 style="text-align: center;">All friends</h2>
                <div class="container" id="all-friends">
                    <div class="friend-info">
                        <a href="katyperry-profile.html">
                            <img src="../img/skeleton-profile-yellow.png" alt="katy perry">
                        </a>
                        <p>Katy Perry</p>
                    </div>
                    <div class="friend-info">
                        <a href="jessi-j-profile.html">
                            <img src="../img/fish-profile-green.png" alt="jessi j">
                        </a>
                        <p>Jessi J</p>
                    </div>
                    <div class="friend-info">
                        <a href="brunomars-profile.html">
                            <img src="../img/skeleton-profile-green.png" alt="bruno mars">
                        </a>
                        <p>Bruno Mars</p>
                    </div>
                    <div class="friend-info">
                        <a href="mileycyrus-profile.html">
                            <img src="../img/shark-profile-red.png" alt="miley cyrus">
                        </a>
                        <p>Miley Cyrus</p>
                    </div>
                    <div class="friend-info">
                        <a href="ladygaga-profile.html">
                            <img src="../img/shark-profile-black.png" alt="lady gaga">
                        </a>
                        <p>Lady Gaga</p>
                    </div>
                    <div class="friend-info">
                        <a href="charli-xcx-profile.html">
                            <img src="../img/fish-profile-purple.png" alt="charli xcx">
                        </a>
                        <p>Charli XCX</p>
                    </div>
                    <div class="friend-info">
                        <a href="troyesivan-profile.html">
                            <img src="../img/fish-profile-suit.png" alt="troye sivan">
                        </a>
                        <p>Troye Sivan</p>
                    </div>
                    
                    <script>
                        document.addEventListener('DOMContentLoaded', () => {
                            const allFriendsContainer = document.getElementById('all-friends');
                    
                            // Load friends from localStorage
                            const friendsList = JSON.parse(localStorage.getItem('allFriends')) || [];
                    
                            // Dynamically add each friend to the "All Friends" section
                            friendsList.forEach(friend => {
                                const friendCard = document.createElement('div');
                                friendCard.classList.add('friend-info');
                    
                                // Add the avatar image
                                const avatar = document.createElement('img');
                                avatar.src = friend.avatar;
                                avatar.alt = friend.name;
                                friendCard.appendChild(avatar);
                    
                                // Add the friend's name
                                const friendName = document.createElement('p');
                                friendName.textContent = friend.name;
                                friendCard.appendChild(friendName);
                    
                                // Add a link to the friend's profile
                                const profileLink = document.createElement('a');
                                profileLink.href = friend.profileLink;
                                profileLink.style.display = 'block';
                                profileLink.style.marginTop = '5px';
                                friendCard.appendChild(profileLink);
                    
                                // Append the friend card to the container
                                allFriendsContainer.appendChild(friendCard);
                            });
                        });
                    </script>
                </div>
                
            </div>
        </div>
        <script src="../elements/navbar.js"></script>
        <custom-navbar></custom-navbar>
    </div>
</body>
</html>