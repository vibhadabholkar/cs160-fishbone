<!DOCTYPE html>

<html>
  <head>
    <title>Habits</title>

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,100;0,300;0,400;0,700;0,900;1,100;1,300;1,400;1,700;1,900&display=swap"
      rel="stylesheet"
    />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <link rel="stylesheet" type="text/css" href="../friends/friends.css" />    
    <link rel="stylesheet" href="../main.css">
    <link rel="stylesheet" type="text/css" href="habits.css" />

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-ENjdO4Dr2bkBIFxQpeoC54IhZzU+Xj3yZ7uxr9MQvYjZEENe0eJuD7FQ2K+0U1p1"
      crossorigin="anonymous"
    />

  </head>
  <body>
    <div id="mobile">
      <header>
        <h1>Add/Edit Habits</h1>      
      </header>
      <main>

        <a href="addhabits.html">
          <button class="btn btn-primary" id="Add"> Add Habits </button>
        </a>

        <h2> Current Habits</h2>

        <!-- Current Habits Div -->
        <div class = "curr-habits">

        </div>

        <button type="button" class="btn btn-dark" id="DemoDone">Demo Done!</button>
        
      </main>

      
      <script>
        

        // General Function structure credited to ChatGPT to understand how to move things between several html files like this
        window.addEventListener("DOMContentLoaded", () => {
          const headerContainer = document.getElementsByClassName("curr-habits")[0];
          const wentToAddHabit = JSON.parse(localStorage.getItem("cameBack?")); 
          if (wentToAddHabit) {
            const habitList = JSON.parse(localStorage.getItem("habitData")); 

            if (habitList.length > 0) {
              habitList.forEach(habit => {
                const habitDiv = document.createElement('div');  
                let html = "";
                for (let key in habit) {
                  html += `<p><strong>${key}:</strong> ${habit[key]}</p><br>`;
                }
                habitDiv.innerHTML = html + `<a href="edithabits.html"> <button id="Edit">Edit Habit</button> </a>`;
                headerContainer.appendChild(habitDiv);
                localStorage.removeItem("cameBack?");
              });
            }
            
          }
        });

        document.getElementById('DemoDone').addEventListener('click', function() {
          localStorage.clear();
          location.reload()
          });
      
      </script>
      <script src="../elements/navbar.js"></script>
      <custom-navbar></custom-navbar>
    </div>
  </body>
</html>
